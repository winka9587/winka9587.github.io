---
title: llava in kaggle notebook 
date: 2025-04-21 08:55
category: 
author: 
tags: []
summary: 
---

## 待验证思路

1. 使用DINOv2+BLIP混合fusion提升聚类精度(有效果但提升不大)

2. 全局PCA切换为独立feature对应独立PCA（且train_dataset训练PCA, 而非test_dataset临时fit）

3. mst 构建图像间查询节点, 快速聚类及检索

4. 场景独立memory, 共享Decoder（对称结构）并输出pose

5. 如果是非序列输入, 那么图像间是独立的。但是如果是序列输入的话, move连续性是否应该被考虑? 在decoder中应该被包含在内。

## 其他

~~~
/data5/cxx/workspace/llava-model-checkpoints


  506  mkdir -p llava-packages
  507  pip download   transformers accelerate sentencepiece bitsandbytes   -d llava-packages
  512  git clone https://github.com/haotian-liu/LLaVA.git llava-code/LLaVA
  513  cd llava-code/LLaVA
  514  rm -rf .git  # 删除 .git 避免浪费空间
  518  mkdir -p
  520  mkdir -p llava-model-checkpoints/
  521  ls
  522  cd llava-model-checkpoints/
    下载huggingface的所有内容https://huggingface.co/liuhaotian/llava-v1.5-7b/tree/main
~~~

此后的结构如下：

~~~
llava-offline/
├── llava-packages/
│   ├── transformers-4.51.3-py3-none-any.whl
│   └── ...
├── llava-code/
│   └── LLaVA/
│       ├── llava/
│       ├── setup.py
│       └── ...
└── llava-model-checkpoints/
    └── snapshots/
        └── 1234567890abcdef/
            ├── config.json
            ├── pytorch_model-00001-of-00002.bin
            └── ...
~~~

将llava-offline压缩为一个单独的zip文件, 上传为一个单独的kaggle Dataset.

# 问题列表

## llava

### 使用特定的transformers版本

~~~
!pip install transformers==4.36.2
~~~

https://www.kaggle.com/competitions/chaii-hindi-and-tamil-question-answering/discussion/267694#1488794

必须在kaggle notebook的第一个cell中执行。如果需要离线安装，参考：https://www.kaggle.com/c/severstal-steel-defect-detection/discussion/113195


## 结果

官方提供的P100和T4*2都不能满足条件，T4*2可以分布到两张卡上运行，但是我拉取的最新镜像有bug，双卡llava会运行失败。

![](/assets/img/2025-04-24-10-24-02.png)

> 
> 1.appear to be engaged in conversation or listening to a speaker. The room has a dining table in the background, which occupies a significant portion of the space. There are also two chairs visible in the room, one near the center and the other towards the right side. The overall atmosphere of the image suggests a collaborative and social environment.
>
> 2.further back. The individuals are of varying heights and positions, indicating that they might be of different ages or genders. They all appear to be focused on the same direction, possibly anticipating an announcement or event. The overall atmosphere of the image suggests that the people are organized and orderly, waiting patiently in line for whatever is about to happen.
>


# Baseline test

测试[OCTAVI GRAU提供的baseline](https://www.kaggle.com/code/octaviograu/baseline-dinov2-aliked-lightglue)

DINOv2 提取全局描述符，筛选图像对，shortlisting

ALKIED 检测局部特征点，使用LightGlue进行局部特征匹配。

RANSAC+PnP（pycolmap）计算相对旋转和位移，估计三维姿态

## 目前的baseline问题

1. 加载图像太慢, 主要问题出在图像对的构建上$C^2_n$的复杂度太高了。在kaggle notebook上如果尝试加载所有的train数据甚至会导致超过内存上限。

能否利用memory减小复杂度? 但速度不是最关键的问题

2. 聚类精度不够

3. pose estimation 精度不够


# 待验证的解决思路

使用dinov2的global desc和BLIP进行聚类

将聚类结果临时保存，按小的dataset加载并使用memory机制进行匹配。

MUSt3R提到使用xformer快速计算注意力？



## 指标记录

### baseline

~~~
stairs: score=6.25% (mAA=3.33%, clusterness=50.00%)

imc2023_haiper: score=0.00% (mAA=0.00%, clusterness=0.00%)
imc2023_heritage: score=0.00% (mAA=0.00%, clusterness=0.00%)
imc2023_theather_imc2024_church: score=52.24% (mAA=35.36%, clusterness=100.00%)
imc2024_dioscuri_baalshamin: score=62.98% (mAA=48.61%, clusterness=89.41%)imc2024_lizard_pond: score=0.00% (mAA=0.00%, clusterness=0.00%)
pt_brandenburg_british_buckingham: score=0.00% (mAA=0.00%, clusterness=0.00%)
pt_piazzasanmarco_grandplace: score=0.00% (mAA=0.00%, clusterness=0.00%)
pt_sacrecoeur_trevi_tajmahal: score=0.00% (mAA=0.00%, clusterness=0.00%)
pt_stpeters_stpauls: score=0.00% (mAA=0.00%, clusterness=0.00%)
amy_gardens: score=30.90% (mAA=18.27%, clusterness=100.00%)
fbk_vineyard: score=28.03% (mAA=24.19%, clusterness=33.33%)
ETs: score=31.67% (mAA=25.00%, clusterness=43.18%)
stairs: score=6.25% (mAA=3.33%, clusterness=50.00%)
~~~

### DINO+BLIP 共用test集拟合PCA模型

~~~
amy_gardens: score=33.23% (mAA=19.92%, clusterness=100.00%)
fbk_vineyard: score=29.50% (mAA=26.46%, clusterness=33.33%)
ETs: score=31.67% (mAA=25.00%, clusterness=43.18%)
stairs: score=5.26% (mAA=2.78%, clusterness=50.00%)
~~~

### DINO+BLIP fusion(normalize+独立PCA model)

~~~
amy_gardens: score=30.54% (mAA=18.02%, clusterness=100.00%)
ETs: score=36.63% (mAA=30.77%, clusterness=45.24%)
~~~

很奇怪， amy_gardens的聚类一直是100%, 属于非常简单的那种, 但是匹配的精度反而降低了。

## 尝试过但是失败的方案

1. llava描述图像, 提取全局特征以提升聚类效果

2. 

## 可视化

可视化代码 :arrow_right: [CODE](https://github.com/winka9587/vision_tool/blob/master/visualize_cams_align.py)

CSV 文件中保存的是世界坐标系到相机坐标系的变换（World2Cam），在可视化时（乘以最优匹配前）需要转换为相机坐标系到世界坐标系的变换（Cam2World）。

$$ \mathbf{R}_{w2c}, \mathbf{t}_{w2c} = \text{Load}(\texttt{submission.csv}) $$

$$ \mathbf{R}_{c2w} = \mathbf{R}_{w2c}^\top $$

$$ \mathbf{t}_{c2w} = -\mathbf{R}_{w2c}^\top \mathbf{t}_{w2c} $$

$$ [\mathbf{R}_{\text{aligned}} \mid \mathbf{t}_{\text{aligned}}] = \mathbf{T}_{\text{best}} [\mathbf{R}_{c2w} \mid \mathbf{t}_{c2w}] $$

## 关于Metric的一些验证与思考

选择了ETs数据集(在3种pipeline下的cluster精度都是100%，排除聚类的干扰)

最优匹配变换transf来自score函数. 保证正确性。

**DINOv2+ALIKED+Lightglue Baseline**

~~~
ETs: score=44.78% (mAA=28.85%, clusterness=100.00%)

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ✅   |   0.04 |  16.67 |
| another_et_another_et002.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et003.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| another_et_another_et004.png|  ❌     ❌     ❌     ❌     ✅     ✅   |   0.02 |  33.33 |
| another_et_another_et005.png|  ❌     ❌     ❌     ✅     ✅     ✅   |   0.01 |  50.00 |
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.09 |   0.00 |
| another_et_another_et007.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et008.png|  ❌     ❌     ✅     ✅     ✅     ✅   |   0.01 |  66.67 |
| another_et_another_et009.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| another_et_another_et010.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
✅ Scene mAA for ETs/another_ET: 35.71%

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.07 |   0.00 |
| et_et001.png            |  ❌     ❌     ✅     ✅     ✅     ✅   |   0.01 |  66.67 | ✅ Removed
| et_et002.png            |  ❌     ❌     ✅     ✅     ✅     ✅   |   0.01 |  66.67 | ✅ Removed
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.12 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.07 |   0.00 |
| et_et005.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et006.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.04 |  16.67 |
| et_et007.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.10 |   0.00 |
| et_et008.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.08 |   0.00 |
✅ Scene mAA for ETs/ET: 4.17%
~~~

**MASt3R**

~~~
ETs: score=40.00% (mAA=25.00%, clusterness=100.00%)

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.05 |   0.00 |
| another_et_another_et002.png|  ❌     ❌     ❌     ❌     ✅     ✅   |   0.02 |  33.33 |
| another_et_another_et003.png|  ❌     ❌     ❌     ❌     ❌     ✅   |   0.03 |  16.67 |
| another_et_another_et004.png|  ❌     ❌     ❌     ❌     ✅     ✅   |   0.02 |  33.33 |
| another_et_another_et005.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.13 |   0.00 |
| another_et_another_et007.png|  ❌     ❌     ❌     ❌     ✅     ✅   |   0.01 |  33.33 | ✅ Removed
| another_et_another_et008.png|  ❌     ✅     ✅     ✅     ✅     ✅   |   0.00 |  83.33 | ✅ Removed
| another_et_another_et009.png|  ❌     ❌     ❌     ❌     ❌     ✅   |   0.03 |  16.67 |
| another_et_another_et010.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.15 |   0.00 |
✅ Scene mAA for ETs/another_ET: 21.43%

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.08 |   0.00 |
| et_et001.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et002.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.03 |  16.67 |
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| et_et005.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.02 |  16.67 |
| et_et006.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et007.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et008.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.10 |   0.00 |
✅ Scene mAA for ETs/ET: 8.33%
~~~

**VGGT**

~~~
ETs: score=14.29% (mAA=7.69%, clusterness=100.00%)

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.10 |   0.00 |
| another_et_another_et002.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.07 |   0.00 |
| another_et_another_et003.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.04 |   0.00 |
| another_et_another_et004.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et005.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.10 |   0.00 |
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.16 |   0.00 |
| another_et_another_et007.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et008.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et009.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.05 |   0.00 |
| another_et_another_et010.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.14 |   0.00 |
✅ Scene mAA for ETs/another_ET: 0.00%

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.14 |   0.00 |
| et_et001.png            |  ❌     ❌     ✅     ✅     ✅     ✅   |   0.01 |  66.67 | ✅ Removed
| et_et002.png            |  ❌     ❌     ❌     ✅     ✅     ✅   |   0.01 |  50.00 | ✅ Removed
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.19 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.12 |   0.00 |
| et_et005.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.07 |   0.00 |
| et_et006.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.11 |   0.00 |
| et_et007.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| et_et008.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
✅ Scene mAA for ETs/ET: 0.00%
~~~

**MASt3R+BA**

~~~
ETs: score=42.42% (mAA=26.92%, clusterness=100.00%)

📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.05 |   0.00 |
| another_et_another_et002.png|  ❌     ❌     ❌     ✅     ✅     ✅   |   0.01 |  50.00 | ✅ Removed
| another_et_another_et003.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.04 |   0.00 |
| another_et_another_et004.png|  ❌     ❌     ❌     ❌     ❌     ✅   |   0.04 |  16.67 |
| another_et_another_et005.png|  ❌     ❌     ❌     ✅     ✅     ✅   |   0.01 |  50.00 | ✅ Removed
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.13 |   0.00 |
| another_et_another_et007.png|  ❌     ❌     ❌     ❌     ✅     ✅   |   0.01 |  33.33 |
| another_et_another_et008.png|  ❌     ❌     ❌     ❌     ✅     ✅   |   0.02 |  33.33 |
| another_et_another_et009.png|  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| another_et_another_et010.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   0.12 |   0.00 |
✅ Scene mAA for ETs/another_ET: 17.86%

 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.07 |   0.00 |
| et_et001.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et002.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.03 |  16.67 |
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.06 |   0.00 |
| et_et005.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.02 |  16.67 |
| et_et006.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et007.png            |  ✅     ✅     ✅     ✅     ✅     ✅   |   0.00 | 100.00 | ✅ Removed
| et_et008.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   0.10 |   0.00 |
✅ Scene mAA for ETs/ET: 8.33%
~~~

**MASt3R + BA + shared_intrinsics=Fase**

ETs: score=7.41% (mAA=3.85%, clusterness=100.00%)


### 无三角化BA

记录对比，以检查是否有提升

~~~
📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   4.38 |   0.00 |
| another_et_another_et002.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 |
| another_et_another_et004.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 |
| another_et_another_et005.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   4.14 |   0.00 |
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   1.32 |   0.00 | ✅ Removed
| another_et_another_et007.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   1.36 |   0.00 | ✅ Removed
| another_et_another_et008.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.25 |   0.00 |
| another_et_another_et009.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   5.04 |   0.00 |
| another_et_another_et010.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   7.41 |   0.00 |
✅ Scene mAA for ETs/another_ET: 0.00%
~~~
~~~
📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ✅     ✅   |   0.01 |  33.33 | ✅ Removed
| et_et001.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   7.32 |   0.00 |
| et_et002.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.45 |   0.00 |
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   9.96 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ✅     ✅   |   0.02 |  33.33 | ✅ Removed
| et_et005.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   7.35 |   0.00 |
| et_et006.png            |  ❌     ❌     ✅     ✅     ✅     ✅   |   0.01 |  66.67 | ✅ Removed
| et_et007.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   2.35 |   0.00 |
| et_et008.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   9.09 |   0.00 |
✅ Scene mAA for ETs/ET: 0.00%
~~~
### 修正三角化BA

~~~
📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   4.38 |   0.00 |
| another_et_another_et002.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 |
| another_et_another_et003.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   2.97 |   0.00 | ✅ Removed
| another_et_another_et004.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 |
| another_et_another_et005.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   4.14 |   0.00 |
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   1.32 |   0.00 | ✅ Removed
| another_et_another_et007.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   1.36 |   0.00 | ✅ Removed
| another_et_another_et008.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.25 |   0.00 |
| another_et_another_et009.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   5.04 |   0.00 |
| another_et_another_et010.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   7.41 |   0.00 |
✅ Scene mAA for ETs/another_ET: 0.00%
~~~

~~~
📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.18 |   0.00 |
| et_et001.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 | ✅ Removed
| et_et002.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   2.61 |   0.00 | ✅ Removed
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.68 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   2.38 |   0.00 | ✅ Removed
| et_et005.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.33 |   0.00 |
| et_et006.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.54 |   0.00 |
| et_et007.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   5.39 |   0.00 |
| et_et008.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   7.13 |   0.00 |
✅ Scene mAA for ETs/ET: 0.00%
~~~

![](/assets/img/2025-05-11-22-21-54.png)


![](/assets/img/2025-05-11-22-22-07.png)

![](/assets/img/2025-05-11-22-22-25.png)

![](/assets/img/2025-05-11-22-22-53.png)

### BA 无效三角化 inv(对保存的RT求逆)

~~~
 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| another_et_another_et001.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   4.38 |   0.00 |
| another_et_another_et002.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 |
| another_et_another_et003.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   2.97 |   0.00 | ✅ Removed
| another_et_another_et004.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.13 |   0.00 |
| another_et_another_et005.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   4.14 |   0.00 |
| another_et_another_et006.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   1.32 |   0.00 | ✅ Removed
| another_et_another_et007.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   1.36 |   0.00 | ✅ Removed
| another_et_another_et008.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   3.25 |   0.00 |
| another_et_another_et009.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   5.04 |   0.00 |
| another_et_another_et010.png|  ❌     ❌     ❌     ❌     ❌     ❌   |   7.41 |   0.00 |
✅ Scene mAA for ETs/another_ET: 0.00%
~~~

~~~
📊 Per-image registration table:
| Image Name              |  0.00   0.01   0.01   0.01   0.02   0.04 | Error  | mAA (%) | Removed?
--------------------------------------------------------------------------------------------------
| et_et000.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   9.78 |   0.00 |
| et_et001.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.02 |  16.67 | ✅ Removed
| et_et002.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   5.99 |   0.00 |
| et_et003.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.31 |   0.00 |
| et_et004.png            |  ❌     ❌     ❌     ❌     ❌     ✅   |   0.03 |  16.67 | ✅ Removed
| et_et005.png            |  ❌     ❌     ❌     ❌     ✅     ✅   |   0.01 |  33.33 | ✅ Removed
| et_et006.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   4.57 |   0.00 |
| et_et007.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   7.92 |   0.00 |
| et_et008.png            |  ❌     ❌     ❌     ❌     ❌     ❌   |   3.69 |   0.00 |
✅ Scene mAA for ETs/ET: 0.00%
~~~

![](/assets/img/2025-05-11-22-23-35.png)

![](/assets/img/2025-05-11-22-24-05.png)

![](/assets/img/2025-05-11-22-25-43.png)